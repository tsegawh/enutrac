import{u as z,r as u,j as e,U as g,e as f,b as j,z as m}from"./index-BkP6pifi.js";import{C as k}from"./calendar-2lG2NB6h.js";import{S as N}from"./shield-DT_NDeoT.js";import{L as b}from"./lock-CunyfNhE.js";import{S as q}from"./save-CNjgA7Rz.js";import{T}from"./trash-2-DXYs1en0.js";function J(){const{user:r,refreshUser:P}=z(),[h,v]=u.useState("profile"),[c,o]=u.useState(!1),[d,S]=u.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||""}),[l,y]=u.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,w]=u.useState({}),C=()=>{const s={};return d.name.trim()||(s.name="Name is required"),d.email.trim()?/\S+@\S+\.\S+/.test(d.email)||(s.email="Email is invalid"):s.email="Email is required",w(s),Object.keys(s).length===0},A=()=>{const s={};return l.currentPassword||(s.currentPassword="Current password is required"),l.newPassword?l.newPassword.length<6&&(s.newPassword="Password must be at least 6 characters"):s.newPassword="New password is required",l.newPassword!==l.confirmPassword&&(s.confirmPassword="Passwords do not match"),w(s),Object.keys(s).length===0},D=async s=>{var t,i;if(s.preventDefault(),!!C()){o(!0);try{await j.put("/user/profile",d),m.success("Profile updated successfully"),await P()}catch(n){const x=((i=(t=n.response)==null?void 0:t.data)==null?void 0:i.error)||"Failed to update profile";m.error(x)}finally{o(!1)}}},F=async s=>{var t,i;if(s.preventDefault(),!!A()){o(!0);try{await j.put("/user/password",{currentPassword:l.currentPassword,newPassword:l.newPassword}),m.success("Password changed successfully"),y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(n){const x=((i=(t=n.response)==null?void 0:t.data)==null?void 0:i.error)||"Failed to change password";m.error(x)}finally{o(!1)}}},E=async()=>{var t,i;const s=prompt("Please enter your password to confirm account deletion:");if(s&&confirm("Are you sure you want to delete your account? This action cannot be undone.")){o(!0);try{await j.delete("/user/account",{data:{password:s}}),m.success("Account deleted successfully")}catch(n){const x=((i=(t=n.response)==null?void 0:t.data)==null?void 0:i.error)||"Failed to delete account";m.error(x)}finally{o(!1)}}},p=(s,t,i)=>{i==="profile"?S(n=>({...n,[s]:t})):y(n=>({...n,[s]:t})),a[s]&&w(n=>({...n,[s]:""}))},L=[{id:"profile",label:"Profile",icon:g},{id:"password",label:"Password",icon:b},{id:"security",label:"Security",icon:N}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account information and security settings"})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-8 h-8 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==null?void 0:r.name}),e.jsx("p",{className:"text-gray-600",children:r==null?void 0:r.email}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:["Joined ",new Date((r==null?void 0:r.createdAt)||"").toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"capitalize",children:r==null?void 0:r.role.toLowerCase()})]})]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:L.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>v(s.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${h===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx("span",{children:s.label})]},s.id)})})}),e.jsxs("div",{className:"p-6",children:[h==="profile"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"label",children:"Full Name"}),e.jsx("input",{id:"name",type:"text",value:d.name,onChange:s=>p("name",s.target.value,"profile"),className:`input ${a.name?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`,placeholder:"Enter your full name"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",value:d.email,readOnly:!0,className:`input ${a.email?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:a.email})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"btn-primary flex items-center space-x-2",children:c?e.jsx(f,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Changes"})]})})})]})]})}),h==="password"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"label",children:"Current Password"}),e.jsx("input",{id:"currentPassword",type:"password",value:l.currentPassword,onChange:s=>p("currentPassword",s.target.value,"password"),className:`input ${a.currentPassword?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`,placeholder:"Enter your current password"}),a.currentPassword&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:a.currentPassword})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"label",children:"New Password"}),e.jsx("input",{id:"newPassword",type:"password",value:l.newPassword,onChange:s=>p("newPassword",s.target.value,"password"),className:`input ${a.newPassword?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`,placeholder:"Enter new password"}),a.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:a.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Confirm New Password"}),e.jsx("input",{id:"confirmPassword",type:"password",value:l.confirmPassword,onChange:s=>p("confirmPassword",s.target.value,"password"),className:`input ${a.confirmPassword?"border-error-500 focus:border-error-500 focus:ring-error-500":""}`,placeholder:"Confirm new password"}),a.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:a.confirmPassword})]})]}),e.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-primary-900 mb-2",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-sm text-primary-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"At least 6 characters long"}),e.jsx("li",{children:"Different from your current password"}),e.jsx("li",{children:"Should be unique and not used elsewhere"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"btn-primary flex items-center space-x-2",children:c?e.jsx(f,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"Change Password"})]})})})]})]})}),h==="security"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Settings"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Account Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Type:"}),e.jsx("span",{className:"font-medium capitalize",children:r==null?void 0:r.role.toLowerCase()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Member Since:"}),e.jsx("span",{className:"font-medium",children:new Date((r==null?void 0:r.createdAt)||"").toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Login:"}),e.jsx("span",{className:"font-medium",children:"Current session"})]})]})]}),e.jsxs("div",{className:"border border-error-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-error-900 mb-3",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-error-700 mb-4",children:"Once you delete your account, there is no going back. Please be certain."}),e.jsx("button",{onClick:E,disabled:c,className:"btn-error flex items-center space-x-2",children:c?e.jsx(f,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete Account"})]})})]})]})})]})]})]})}export{J as default};
//# sourceMappingURL=Account-DwquyyX9.js.map

import{r as a,b as g,z as y,j as e}from"./index-Dza2ow_d.js";import{D as i}from"./dollar-sign-FcAv3wVh.js";import{C as f}from"./check-circle-DrxfHzqS.js";import{X as N}from"./x-circle-CAnUV4ca.js";import{C as v}from"./calendar-CDwTpDyp.js";function C(){const[t,n]=a.useState([]),[d,c]=a.useState(!0),[r,x]=a.useState("ALL"),[l,m]=a.useState("7");a.useEffect(()=>{o()},[r,l]);const o=async()=>{try{c(!0);const s=await g.get("/admin/payments",{params:{status:r!=="ALL"?r:void 0,days:l}});n(s.data.payments)}catch(s){console.error("Error fetching payments:",s),y.error("Failed to load payments")}finally{c(!1)}},h=s=>{switch(s){case"COMPLETED":return"bg-green-100 text-green-800";case"FAILED":return"bg-red-100 text-red-800";case"PENDING":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},p=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"ETB"}).format(s),u=t.filter(s=>s.status==="COMPLETED").reduce((s,j)=>s+j.amount,0);return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Management"}),e.jsx("p",{className:"text-gray-600",children:"Monitor transactions and revenue"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(f,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Successful"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(s=>s.status==="COMPLETED").length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(s=>s.status==="FAILED").length})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(s=>s.status==="PENDING").length})]})]})})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),["ALL","COMPLETED","FAILED","PENDING"].map(s=>e.jsx("button",{onClick:()=>x(s),className:`px-3 py-1 rounded-lg text-sm font-medium ${r===s?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50"}`,children:s},s))]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Period:"}),e.jsxs("select",{value:l,onChange:s=>m(s.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"}),e.jsx("option",{value:"365",children:"Last year"})]})]})]})}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(i,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.id.slice(0,8),"..."]}),s.subscription&&e.jsx("div",{className:"text-sm text-gray-500",children:s.subscription.plan})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.user.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.user.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(s.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.method}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]},s.id))})]})})})]})}export{C as default};
//# sourceMappingURL=AdminPayments-WOe2I6If.js.map

{"version":3,"file":"AdminDashboard-BA0ymVxC.js","sources":["../../src/pages/admin/AdminDashboard.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Users, CreditCard, Smartphone, DollarSign, TrendingUp, AlertTriangle } from 'lucide-react';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\ninterface AdminStats {\n  totalUsers: number;\n  activeSubscriptions: number;\n  totalDevices: number;\n  totalRevenue: number;\n  expiringSubscriptions: number;\n}\n\nexport default function AdminDashboard() {\n  const [stats, setStats] = useState<AdminStats | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  const fetchStats = async () => {\n    try {\n      const response = await axios.get('/admin/stats');\n      setStats(response.data.stats);\n    } catch (error) {\n      console.error('Error fetching admin stats:', error);\n      toast.error('Failed to load dashboard statistics');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const sendReminders = async () => {\n    try {\n      const response = await axios.post('/admin/users/send-reminders');\n      toast.success(response.data.message);\n    } catch (error: any) {\n      const message = error.response?.data?.error || 'Failed to send reminders';\n      toast.error(message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"loading-spinner w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Admin Dashboard</h1>\n          <p className=\"text-gray-600\">System overview and management</p>\n        </div>\n\n        <button\n          onClick={sendReminders}\n          className=\"btn-primary\"\n        >\n          Send Expiry Reminders\n        </button>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\">\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center\">\n              <Users className=\"w-5 h-5 text-primary-600\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Total Users</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalUsers || 0}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-success-100 rounded-lg flex items-center justify-center\">\n              <CreditCard className=\"w-5 h-5 text-success-600\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Active Subscriptions</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.activeSubscriptions || 0}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-warning-100 rounded-lg flex items-center justify-center\">\n              <Smartphone className=\"w-5 h-5 text-warning-600\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Total Devices</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalDevices || 0}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-success-100 rounded-lg flex items-center justify-center\">\n              <DollarSign className=\"w-5 h-5 text-success-600\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Total Revenue</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                ${(stats?.totalRevenue || 0).toFixed(2)}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-error-100 rounded-lg flex items-center justify-center\">\n              <AlertTriangle className=\"w-5 h-5 text-error-600\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Expiring Soon</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.expiringSubscriptions || 0}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center\">\n              <Users className=\"w-4 h-4 text-primary-600\" />\n            </div>\n            <h3 className=\"font-semibold text-gray-900\">User Management</h3>\n          </div>\n          <p className=\"text-gray-600 text-sm mb-4\">\n            View and manage all registered users, their subscriptions, and account status.\n          </p>\n          <a href=\"/admin/dashboard/users\" className=\"btn-primary w-full\">\n            Manage Users\n          </a>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"w-8 h-8 bg-success-100 rounded-lg flex items-center justify-center\">\n              <CreditCard className=\"w-4 h-4 text-success-600\" />\n            </div>\n            <h3 className=\"font-semibold text-gray-900\">Subscriptions</h3>\n          </div>\n          <p className=\"text-gray-600 text-sm mb-4\">\n            Monitor subscription status, renewals, and handle expiring accounts.\n          </p>\n          <a href=\"/admin/dashboard/subscriptions\" className=\"btn-primary w-full\">\n            View Subscriptions\n          </a>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"flex items-center space-x-3 mb-4\">\n            <div className=\"w-8 h-8 bg-warning-100 rounded-lg flex items-center justify-center\">\n              <Smartphone className=\"w-4 h-4 text-warning-600\" />\n            </div>\n            <h3 className=\"font-semibold text-gray-900\">Device Management</h3>\n          </div>\n          <p className=\"text-gray-600 text-sm mb-4\">\n            View all registered devices, their status, and manage device assignments.\n          </p>\n          <a href=\"/admin/devices\" className=\"btn-primary w-full\">\n            Manage Devices\n          </a>\n        </div>\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"card\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">System Health</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 bg-success-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n              <TrendingUp className=\"w-6 h-6 text-success-600\" />\n            </div>\n            <h3 className=\"font-medium text-gray-900\">System Status</h3>\n            <p className=\"text-sm text-success-600\">All systems operational</p>\n          </div>\n\n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n              <Users className=\"w-6 h-6 text-primary-600\" />\n            </div>\n            <h3 className=\"font-medium text-gray-900\">Active Users</h3>\n            <p className=\"text-sm text-gray-600\">\n              {Math.round((stats?.activeSubscriptions || 0) / (stats?.totalUsers || 1) * 100)}% subscription rate\n            </p>\n          </div>\n\n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 bg-warning-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n              <AlertTriangle className=\"w-6 h-6 text-warning-600\" />\n            </div>\n            <h3 className=\"font-medium text-gray-900\">Attention Needed</h3>\n            <p className=\"text-sm text-warning-600\">\n              {stats?.expiringSubscriptions || 0} subscriptions expiring soon\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["AdminDashboard","stats","setStats","useState","loading","setLoading","useEffect","fetchStats","response","axios","error","toast","sendReminders","message","_b","_a","jsx","jsxs","Users","CreditCard","Smartphone","DollarSign","AlertTriangle","TrendingUp"],"mappings":"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"}
import{c as b,r as a,j as e,e as w,k as v,b as S,z as k}from"./index-BkP6pifi.js";import{S as P}from"./search-BMpeLQjA.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=b("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function L(){const[u,y]=a.useState([]),[g,n]=a.useState(!0),[c,f]=a.useState(""),[r,l]=a.useState(1),[i,j]=a.useState(1),x=async()=>{var s;try{n(!0);const t=await S.get("/admin/users",{params:{page:r,limit:20,search:c||void 0}});y(t.data.users||[]),j(((s=t.data.pagination)==null?void 0:s.pages)||1)}catch(t){console.error("Error fetching users:",t),k.error("Failed to load users")}finally{n(!1)}};a.useEffect(()=>{x()},[r,c]);const N=s=>{s.preventDefault(),l(1),x()};return g?e.jsx(w,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage all registered users and their accounts"})]})}),e.jsx("div",{className:"card",children:e.jsxs("form",{onSubmit:N,className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:c,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Search"})]})}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Device Limit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription End"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(s=>{var t,d,p,o,m,h;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.role==="ADMIN"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.subscription?e.jsxs("div",{children:[e.jsx("div",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.subscription.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.subscription.status}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:((t=s.subscription.plan)==null?void 0:t.name)||"No plan"})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No subscription"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((p=(d=s.subscription)==null?void 0:d.plan)==null?void 0:p.deviceLimit)||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((m=(o=s.subscription)==null?void 0:o.plan)==null?void 0:m.price)!=null?`$${s.subscription.plan.price}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(h=s.subscription)!=null&&h.endDate?new Date(s.subscription.endDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(D,{className:"w-5 h-5"})})})]},s.id)})})]})}),i>1&&e.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",r," of ",i]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>l(s=>Math.max(1,s-1)),disabled:r===1,className:"px-3 py-1 text-sm border rounded disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>l(s=>Math.min(i,s+1)),disabled:r===i,className:"px-3 py-1 text-sm border rounded disabled:opacity-50",children:"Next"})]})]})]})]})}export{L as default};
//# sourceMappingURL=AdminUsers-jljS4iMf.js.map

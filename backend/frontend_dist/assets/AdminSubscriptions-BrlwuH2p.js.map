{"version":3,"file":"AdminSubscriptions-BrlwuH2p.js","sources":["../../src/pages/admin/AdminSubscriptions.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport { CreditCard , AlertTriangle } from 'lucide-react';\n\ninterface Subscription {\n  id: string;\n  status: string;\n  planId: string;\n  startDate: string;\n  endDate: string;\n  user: {\n    id: string;\n    name: string;\n    email: string;\n  };\n}\n\nexport default function AdminSubscriptions() {\n  const [subscriptions, setSubscriptions] = useState<Subscription[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('ALL');\n\n  useEffect(() => {\n    fetchSubscriptions();\n  }, [filter]);\n\n  const fetchSubscriptions = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/admin/subscriptions', {\n        params: { status: filter !== 'ALL' ? filter : undefined }\n      });\n      \n      setSubscriptions(response.data.subscriptions);\n    } catch (error) {\n      console.error('Error fetching subscriptions:', error);\n      toast.error('Failed to load subscriptions');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'ACTIVE':\n        return 'bg-green-100 text-green-800';\n      case 'EXPIRED':\n        return 'bg-red-100 text-red-800';\n      case 'CANCELLED':\n        return 'bg-gray-100 text-gray-800';\n      default:\n        return 'bg-yellow-100 text-yellow-800';\n    }\n  };\n\n  const isExpiringSoon = (endDate: string) => {\n    const end = new Date(endDate);\n    const now = new Date();\n    const daysUntilExpiry = Math.ceil((end.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n    return daysUntilExpiry <= 7 && daysUntilExpiry > 0;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"loading-spinner w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Subscription Management</h1>\n          <p className=\"text-gray-600\">Monitor and manage user subscriptions</p>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"card\">\n        <div className=\"flex space-x-4\">\n          {['ALL', 'ACTIVE', 'EXPIRED', 'CANCELLED'].map((status) => (\n            <button\n              key={status}\n              onClick={() => setFilter(status)}\n              className={`px-4 py-2 rounded-lg text-sm font-medium ${\n                filter === status\n                  ? 'bg-primary-100 text-primary-700'\n                  : 'text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              {status}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Subscriptions Table */}\n      <div className=\"card overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  User\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Plan\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Start Date\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  End Date\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Warning\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {subscriptions.map((subscription) => (\n                <tr key={subscription.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center\">\n                        <CreditCard className=\"w-5 h-5 text-primary-600\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <div className=\"text-sm font-medium text-gray-900\">{subscription.user.name}</div>\n                        <div className=\"text-sm text-gray-500\">{subscription.user.email}</div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className=\"text-sm font-medium text-gray-900\">{subscription.planId}</span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(subscription.status)}`}>\n                      {subscription.status}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {new Date(subscription.startDate).toLocaleDateString()}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {new Date(subscription.endDate).toLocaleDateString()}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    {isExpiringSoon(subscription.endDate) && (\n                      <div className=\"flex items-center text-warning-600\">\n                        <AlertTriangle className=\"w-4 h-4 mr-1\" />\n                        <span className=\"text-xs\">Expires soon</span>\n                      </div>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["AdminSubscriptions","subscriptions","setSubscriptions","useState","loading","setLoading","filter","setFilter","useEffect","fetchSubscriptions","response","axios","error","toast","getStatusColor","status","isExpiringSoon","endDate","end","now","daysUntilExpiry","jsx","jsxs","subscription","CreditCard","AlertTriangle"],"mappings":"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"}
{"version":3,"file":"AdminUsers-Cv6NpW2K.js","sources":["../../node_modules/lucide-react/dist/esm/icons/more-vertical.js","../../src/pages/admin/AdminUsers.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MoreVertical = createLucideIcon(\"MoreVertical\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\nexport { MoreVertical as default };\n//# sourceMappingURL=more-vertical.js.map\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport { Users, Search, MoreVertical } from 'lucide-react';\nimport LoadingSpinner from '../../components/LoadingSpinner';\n\ninterface Plan {\n  id: string;\n  name: string;\n  deviceLimit: number;\n  price: number;\n  durationDays: number;\n}\n\ninterface Subscription {\n  id: string;\n  status: string;\n  endDate: string;\n  plan: Plan;\n}\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  role: 'USER' | 'ADMIN';\n  createdAt: string;\n  subscription?: Subscription;\n}\n\nexport default function AdminUsers() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/admin/users', {\n        params: {\n          page: currentPage,\n          limit: 20,\n          search: searchTerm || undefined\n        }\n      });\n\n      setUsers(response.data.users || []);\n      setTotalPages(response.data.pagination?.pages || 1);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      toast.error('Failed to load users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUsers();\n  }, [currentPage, searchTerm]);\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    setCurrentPage(1);\n    fetchUsers();\n  };\n\n  if (loading) return <LoadingSpinner />;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">User Management</h1>\n          <p className=\"text-gray-600\">Manage all registered users and their accounts</p>\n        </div>\n      </div>\n\n      {/* Search */}\n      <div className=\"card\">\n        <form onSubmit={handleSearch} className=\"flex items-center space-x-4\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search users by name or email...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n            />\n          </div>\n          <button type=\"submit\" className=\"btn-primary\">\n            Search\n          </button>\n        </form>\n      </div>\n\n      {/* Users Table */}\n      <div className=\"card overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  User\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Role\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Subscription\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Device Limit\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Plan Price\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Subscription End\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {users.map((user) => (\n                <tr key={user.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center\">\n                        <Users className=\"w-5 h-5 text-primary-600\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <div className=\"text-sm font-medium text-gray-900\">{user.name}</div>\n                        <div className=\"text-sm text-gray-500\">{user.email}</div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      user.role === 'ADMIN' \n                        ? 'bg-purple-100 text-purple-800' \n                        : 'bg-green-100 text-green-800'\n                    }`}>\n                      {user.role}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    {user.subscription ? (\n                      <div>\n                        <div className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                          user.subscription.status === 'ACTIVE' \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-red-100 text-red-800'\n                        }`}>\n                          {user.subscription.status}\n                        </div>\n                        <div className=\"text-xs text-gray-500 mt-1\">\n                          {user.subscription.plan?.name || 'No plan'}\n                        </div>\n                      </div>\n                    ) : (\n                      <span className=\"text-sm text-gray-400\">No subscription</span>\n                    )}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {user.subscription?.plan?.deviceLimit || '-'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {user.subscription?.plan?.price != null\n                      ? `$${user.subscription.plan.price}`\n                      : '-'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {user.subscription?.endDate\n                      ? new Date(user.subscription.endDate).toLocaleDateString()\n                      : '-'}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    <button className=\"text-gray-400 hover:text-gray-600\">\n                      <MoreVertical className=\"w-5 h-5\" />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {/* Pagination */}\n        {totalPages > 1 && (\n          <div className=\"px-6 py-3 border-t border-gray-200 flex items-center justify-between\">\n            <div className=\"text-sm text-gray-500\">\n              Page {currentPage} of {totalPages}\n            </div>\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n                disabled={currentPage === 1}\n                className=\"px-3 py-1 text-sm border rounded disabled:opacity-50\"\n              >\n                Previous\n              </button>\n              <button\n                onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n                disabled={currentPage === totalPages}\n                className=\"px-3 py-1 text-sm border rounded disabled:opacity-50\"\n              >\n                Next\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["MoreVertical","createLucideIcon","AdminUsers","users","setUsers","useState","loading","setLoading","searchTerm","setSearchTerm","currentPage","setCurrentPage","totalPages","setTotalPages","fetchUsers","response","axios","_a","error","toast","useEffect","handleSearch","e","jsx","LoadingSpinner","jsxs","Search","user","Users","prev"],"mappings":"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","x_google_ignoreList":[0]}
{"version":3,"file":"ResetPassword-BIjL_5hQ.js","sources":["../../src/pages/ResetPassword.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useSearchParams, useNavigate } from 'react-router-dom';\r\nimport { MapPin, Lock, Eye, EyeOff, CheckCircle } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\n\r\nexport default function ResetPassword() {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const token = searchParams.get('token');\r\n\r\n  const [formData, setFormData] = useState({\r\n    password: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      toast.error('Invalid reset link');\r\n      navigate('/login');\r\n    }\r\n  }, [token, navigate]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (!formData.password) {\r\n      newErrors.password = 'Password is required';\r\n    } else if (formData.password.length < 6) {\r\n      newErrors.password = 'Password must be at least 6 characters';\r\n    }\r\n\r\n    if (formData.password !== formData.confirmPassword) {\r\n      newErrors.confirmPassword = 'Passwords do not match';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      await axios.post('/auth/reset-password', {\r\n        token,\r\n        password: formData.password,\r\n      });\r\n      \r\n      setSuccess(true);\r\n      toast.success('Password reset successfully');\r\n    } catch (error: any) {\r\n      const message = error.response?.data?.error || 'Failed to reset password';\r\n      toast.error(message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({ ...prev, [name]: '' }));\r\n    }\r\n  };\r\n\r\n  if (success) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-success-50 to-success-100 flex items-center justify-center p-4\">\r\n        <div className=\"max-w-md w-full\">\r\n          <div className=\"card text-center\">\r\n            {/* Success Icon */}\r\n            <div className=\"inline-flex items-center justify-center w-16 h-16 bg-success-100 rounded-full mb-6\">\r\n              <CheckCircle className=\"w-8 h-8 text-success-600\" />\r\n            </div>\r\n\r\n            {/* Title */}\r\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Password Reset Complete</h1>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              Your password has been successfully reset. You can now sign in with your new password.\r\n            </p>\r\n\r\n            {/* Action */}\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"btn-primary w-full\"\r\n            >\r\n              Sign In\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4\">\r\n      <div className=\"max-w-md w-full\">\r\n        {/* Logo and title */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-2xl mb-4\">\r\n            <MapPin className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Reset Password</h1>\r\n          <p className=\"text-gray-600\">Enter your new password</p>\r\n        </div>\r\n\r\n        {/* Reset form */}\r\n        <div className=\"card\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"label\">\r\n                New Password\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={formData.password}\r\n                  onChange={handleChange}\r\n                  className={`input pr-10 ${errors.password ? 'border-error-500 focus:border-error-500 focus:ring-error-500' : ''}`}\r\n                  placeholder=\"Enter new password\"\r\n                  required\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                >\r\n                  {showPassword ? (\r\n                    <EyeOff className=\"w-4 h-4 text-gray-400\" />\r\n                  ) : (\r\n                    <Eye className=\"w-4 h-4 text-gray-400\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n              {errors.password && (\r\n                <p className=\"mt-1 text-sm text-error-600\">{errors.password}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"confirmPassword\" className=\"label\">\r\n                Confirm New Password\r\n              </label>\r\n              <input\r\n                id=\"confirmPassword\"\r\n                name=\"confirmPassword\"\r\n                type=\"password\"\r\n                value={formData.confirmPassword}\r\n                onChange={handleChange}\r\n                className={`input ${errors.confirmPassword ? 'border-error-500 focus:border-error-500 focus:ring-error-500' : ''}`}\r\n                placeholder=\"Confirm new password\"\r\n                required\r\n              />\r\n              {errors.confirmPassword && (\r\n                <p className=\"mt-1 text-sm text-error-600\">{errors.confirmPassword}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Password Requirements */}\r\n            <div className=\"bg-primary-50 border border-primary-200 rounded-lg p-4\">\r\n              <h3 className=\"text-sm font-medium text-primary-900 mb-2\">Password Requirements:</h3>\r\n              <ul className=\"text-sm text-primary-800 space-y-1 list-disc list-inside\">\r\n                <li>At least 6 characters long</li>\r\n                <li>Should be unique and not used elsewhere</li>\r\n                <li>Consider using a mix of letters, numbers, and symbols</li>\r\n              </ul>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"btn-primary w-full\"\r\n            >\r\n              {loading ? (\r\n                <LoadingSpinner size=\"sm\" />\r\n              ) : (\r\n                <>\r\n                  <Lock className=\"w-4 h-4 mr-2\" />\r\n                  Reset Password\r\n                </>\r\n              )}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Back to login */}\r\n          <div className=\"mt-6 text-center\">\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"text-sm text-primary-600 hover:text-primary-500 font-medium\"\r\n            >\r\n              Back to Login\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["ResetPassword","searchParams","useSearchParams","navigate","useNavigate","token","formData","setFormData","useState","showPassword","setShowPassword","loading","setLoading","success","setSuccess","errors","setErrors","useEffect","toast","validateForm","newErrors","handleSubmit","axios","error","message","_b","_a","handleChange","name","value","prev","jsx","jsxs","CheckCircle","Link","MapPin","EyeOff","Eye","LoadingSpinner","Fragment","Lock"],"mappings":"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"}
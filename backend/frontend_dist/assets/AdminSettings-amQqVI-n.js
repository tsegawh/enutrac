import{r as c,b as n,z as t,j as e,D as o,p as h}from"./index-Dza2ow_d.js";import{S as f}from"./save-rXu3c99o.js";import{S as p}from"./smartphone-BueILheT.js";import{M as b}from"./mail-DL_1C05f.js";function S(){const[r,a]=c.useState({traccarUrl:"",traccarUser:"",emailEnabled:!1,maintenanceMode:!1,cronEnabled:!1,cronSchedule:"",cronCutoffHours:1,maxDevicesPerUser:5,subscriptionPlans:[]}),[m,l]=c.useState(!0),[i,d]=c.useState(!1);c.useEffect(()=>{x()},[]);const x=async()=>{try{l(!0);const s=await n.get("/admin/settings");a(s.data.settings)}catch(s){console.error("Error fetching settings:",s),t.error("Failed to load settings")}finally{l(!1)}},g=async()=>{try{d(!0),await n.put("/admin/settings",{settings:r}),t.success("Settings saved successfully")}catch(s){console.error("Error saving settings:",s),t.error("Failed to save settings")}finally{d(!1)}},u=async()=>{try{(await n.post("/admin/test-traccar")).data.success?t.success("Traccar connection successful"):t.error("Traccar connection failed")}catch{t.error("Failed to test Traccar connection")}};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure system-wide settings and preferences"})]}),e.jsxs("button",{onClick:g,disabled:i,className:"btn-primary flex items-center space-x-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:i?"Saving...":"Save Settings"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Traccar Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Traccar Server URL"}),e.jsx("input",{type:"url",value:r.traccarUrl,onChange:s=>a({...r,traccarUrl:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://demo4.traccar.org"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Traccar Username"}),e.jsx("input",{type:"text",value:r.traccarUser,onChange:s=>a({...r,traccarUser:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:u,className:"btn-secondary",children:"Test Connection"})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(p,{className:"w-4 h-4 text-green-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Device Settings"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Devices per User"}),e.jsx("input",{type:"number",min:"1",max:"100",value:r.maxDevicesPerUser,onChange:s=>a({...r,maxDevicesPerUser:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(b,{className:"w-4 h-4 text-purple-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Email Settings"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"emailEnabled",checked:r.emailEnabled,onChange:s=>a({...r,emailEnabled:s.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"emailEnabled",className:"text-sm font-medium text-gray-700",children:"Enable email notifications"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(o,{className:"w-4 h-4 text-yellow-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cron Job Settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"cronEnabled",checked:!!r.cronEnabled||!1,onChange:s=>a({...r,cronEnabled:s.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"cronEnabled",className:"text-sm font-medium text-gray-700",children:"Enable automated cron jobs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule (Cron Expression)"}),e.jsx("input",{type:"text",value:r.cronSchedule||"0 * * * *",onChange:s=>a({...r,cronSchedule:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0 * * * *"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Example: “0 * * * *” = every hour, “*/10 * * * *” = every 10 minutes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expire PENDING Payments After (hours)"}),e.jsx("input",{type:"number",min:"1",max:"168",value:r.cronCutoffHours||24,onChange:s=>a({...r,cronCutoffHours:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(h,{className:"w-4 h-4 text-red-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"System Settings"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"maintenanceMode",checked:r.maintenanceMode,onChange:s=>a({...r,maintenanceMode:s.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"maintenanceMode",className:"text-sm font-medium text-gray-700",children:"Enable maintenance mode"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Prevents new user registrations and limits access)"})]})})]})]})}export{S as default};
//# sourceMappingURL=AdminSettings-amQqVI-n.js.map

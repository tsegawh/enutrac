{"version":3,"file":"AdminReports-B0eAVN0-.js","sources":["../../src/components/AdminDeviceReports.tsx","../../src/pages/admin/AdminReports.tsx"],"sourcesContent":["import axios from 'axios';\r\nimport { format } from 'date-fns';\r\nimport { BarChart3, Calendar, Clock, Download, Gauge, MapPin, Route, X } from 'lucide-react';\r\nimport { useEffect, useState } from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport DeviceMap from './DeviceMap';\r\nimport LoadingSpinner from './LoadingSpinner';\r\n\r\ninterface Device {\r\n  id: string;\r\n  name: string;\r\n  uniqueId: string;\r\nuserEmail?: string;\r\nisActive?: boolean; \r\nisOnline?: boolean;\r\n}\r\n\r\ninterface ReportSummary {\r\n  totalDistance: number;\r\n  maxSpeed: number;\r\n  averageSpeed: number;\r\n  totalTime: number;\r\n  movingTime: number;\r\n  stoppedTime: number;\r\n  positionCount: number;\r\n}\r\n\r\ninterface Position {\r\n  id: number;\r\n  deviceId: number;\r\n  serverTime: string;\r\n  deviceTime: string;\r\n  fixTime: string;\r\n  valid: boolean;\r\n  latitude: number;\r\n  longitude: number;\r\n  altitude: number;\r\n  speed: number;\r\n  course: number;\r\n  attributes: Record<string, any>;\r\n}\r\n\r\ninterface DeviceReportsModalProps {\r\n  device: Device;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function DeviceReportsModal({ device, onClose }: DeviceReportsModalProps) {\r\n  const [activeTab, setActiveTab] = useState<'summary' | 'route' | 'positions'>('summary');\r\n  const [dateRange, setDateRange] = useState('today');\r\n  const [customFrom, setCustomFrom] = useState('');\r\n  const [customTo, setCustomTo] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [reportData, setReportData] = useState<{\r\n    summary: ReportSummary | null;\r\n    positions: Position[];\r\n  }>({\r\n    summary: null,\r\n    positions: []\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n  }, [dateRange, customFrom, customTo]);\r\n\r\n  const getDateRange = () => {\r\n    const now = new Date();\r\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n    \r\n    switch (dateRange) {\r\n      case 'today':\r\n        return {\r\n          from: today.toISOString(),\r\n          to: now.toISOString()\r\n        };\r\n      case '7days':\r\n        const sevenDaysAgo = new Date(today);\r\n        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n        return {\r\n          from: sevenDaysAgo.toISOString(),\r\n          to: now.toISOString()\r\n        };\r\n      case '30days':\r\n        const thirtyDaysAgo = new Date(today);\r\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n        return {\r\n          from: thirtyDaysAgo.toISOString(),\r\n          to: now.toISOString()\r\n        };\r\n      case 'custom':\r\n        return {\r\n          from: customFrom ? new Date(customFrom).toISOString() : today.toISOString(),\r\n          to: customTo ? new Date(customTo).toISOString() : now.toISOString()\r\n        };\r\n      default:\r\n        return {\r\n          from: today.toISOString(),\r\n          to: now.toISOString()\r\n        };\r\n    }\r\n  };\r\n\r\n  const fetchReports = async () => {\r\n    if (!device.id) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const { from, to } = getDateRange();\r\n      \r\n      const [reportsResponse, positionsResponse] = await Promise.all([\r\n        axios.get(`/admin/devices/${device.id}/reports`, {\r\n          params: { from, to }\r\n        }),\r\n        axios.get(`/admin/devices/${device.id}/positions`, {\r\n          params: { from, to, limit: 1000 }\r\n        })\r\n      ]);\r\n\r\n      setReportData({\r\n        summary: reportsResponse.data.summary,\r\n        positions: positionsResponse.data.positions || []\r\n      });\r\n    } catch (error: any) {\r\n      console.error('Error fetching reports:', error);\r\n      toast.error('Failed to load device reports');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const exportData = (type: 'summary' | 'positions') => {\r\n    const data = type === 'summary' ? reportData.summary : reportData.positions;\r\n    const filename = `${device.name}_${type}_${format(new Date(), 'yyyy-MM-dd')}.json`;\r\n    \r\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    toast.success(`${type} data exported successfully`);\r\n  };\r\n\r\n  const formatDuration = (minutes: number) => {\r\n    const hours = Math.floor(minutes / 60);\r\n    const mins = Math.round(minutes % 60);\r\n    return hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;\r\n  };\r\n\r\n  const routeData = reportData.positions.map(pos => ({\r\n    latitude: pos.latitude,\r\n    longitude: pos.longitude,\r\n    speed: pos.speed,\r\n    timestamp: pos.fixTime\r\n  }));\r\n\r\n  console.log('Route data:', routeData); // Debug log\r\n  console.log('Report data positions:', reportData.positions); // Debug log\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-gray-900\">Device Reports</h2>\r\n            <p className=\"text-gray-600\">{device.name} ({device.uniqueId})</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Date Range Selector */}\r\n        <div className=\"p-6 border-b border-gray-200 bg-gray-50\">\r\n          <div className=\"flex flex-wrap items-center gap-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Calendar className=\"w-4 h-4 text-gray-500\" />\r\n              <span className=\"text-sm font-medium text-gray-700\">Date Range:</span>\r\n            </div>\r\n            \r\n            <div className=\"flex space-x-2\">\r\n              {[\r\n                { value: 'today', label: 'Today' },\r\n                { value: '7days', label: '7 Days' },\r\n                { value: '30days', label: '30 Days' },\r\n                { value: 'custom', label: 'Custom' }\r\n              ].map((option) => (\r\n                <button\r\n                  key={option.value}\r\n                  onClick={() => setDateRange(option.value)}\r\n                  className={`px-3 py-1 text-sm rounded-lg transition-colors ${\r\n                    dateRange === option.value\r\n                      ? 'bg-primary-100 text-primary-700'\r\n                      : 'text-gray-600 hover:bg-gray-100'\r\n                  }`}\r\n                >\r\n                  {option.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {dateRange === 'custom' && (\r\n              <div className=\"flex items-center space-x-2\">\r\n                <input\r\n                  type=\"datetime-local\"\r\n                  value={customFrom}\r\n                  onChange={(e) => setCustomFrom(e.target.value)}\r\n                  className=\"px-2 py-1 text-sm border border-gray-300 rounded\"\r\n                />\r\n                <span className=\"text-gray-500\">to</span>\r\n                <input\r\n                  type=\"datetime-local\"\r\n                  value={customTo}\r\n                  onChange={(e) => setCustomTo(e.target.value)}\r\n                  className=\"px-2 py-1 text-sm border border-gray-300 rounded\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-gray-200\">\r\n          {[\r\n            { id: 'summary', label: 'Summary', icon: BarChart3 },\r\n            { id: 'route', label: 'Route', icon: Route },\r\n            { id: 'positions', label: 'Positions', icon: MapPin }\r\n          ].map((tab) => {\r\n            const Icon = tab.icon;\r\n            return (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => setActiveTab(tab.id as any)}\r\n                className={`flex items-center space-x-2 px-6 py-3 text-sm font-medium transition-colors ${\r\n                  activeTab === tab.id\r\n                    ? 'border-b-2 border-primary-500 text-primary-600'\r\n                    : 'text-gray-600 hover:text-gray-900'\r\n                }`}\r\n              >\r\n                <Icon className=\"w-4 h-4\" />\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n              <LoadingSpinner />\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Summary Tab */}\r\n              {activeTab === 'summary' && (\r\n                <div className=\"space-y-6\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-lg font-medium text-gray-900\">Report Summary</h3>\r\n                    <button\r\n                      onClick={() => exportData('summary')}\r\n                      className=\"btn-secondary flex items-center space-x-2\"\r\n                    >\r\n                      <Download className=\"w-4 h-4\" />\r\n                      <span>Export</span>\r\n                    </button>\r\n                  </div>\r\n\r\n                  {reportData.summary ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                      <div className=\"card\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className=\"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center\">\r\n                            <Route className=\"w-5 h-5 text-primary-600\" />\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"text-sm text-gray-600\">Total Distance</p>\r\n                            <p className=\"text-xl font-bold text-gray-900\">\r\n                              {reportData.summary.totalDistance.toFixed(2)} km\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className=\"w-10 h-10 bg-success-100 rounded-lg flex items-center justify-center\">\r\n                            <Gauge className=\"w-5 h-5 text-success-600\" />\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"text-sm text-gray-600\">Max Speed</p>\r\n                            <p className=\"text-xl font-bold text-gray-900\">\r\n                              {Math.round(reportData.summary.maxSpeed)} km/h\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className=\"w-10 h-10 bg-warning-100 rounded-lg flex items-center justify-center\">\r\n                            <Gauge className=\"w-5 h-5 text-warning-600\" />\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"text-sm text-gray-600\">Avg Speed</p>\r\n                            <p className=\"text-xl font-bold text-gray-900\">\r\n                              {Math.round(reportData.summary.averageSpeed)} km/h\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n                            <Clock className=\"w-5 h-5 text-blue-600\" />\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"text-sm text-gray-600\">Total Time</p>\r\n                            <p className=\"text-xl font-bold text-gray-900\">\r\n                              {formatDuration(reportData.summary.totalTime)}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\">\r\n                            <Clock className=\"w-5 h-5 text-green-600\" />\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"text-sm text-gray-600\">Moving Time</p>\r\n                            <p className=\"text-xl font-bold text-gray-900\">\r\n                              {formatDuration(reportData.summary.movingTime)}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"card\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                            <MapPin className=\"w-5 h-5 text-gray-600\" />\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"text-sm text-gray-600\">Positions</p>\r\n                            <p className=\"text-xl font-bold text-gray-900\">\r\n                              {reportData.summary.positionCount}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-12\">\r\n                      <p className=\"text-gray-500\">No data available for the selected period</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Route Tab */}\r\n              {activeTab === 'route' && (\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-lg font-medium text-gray-900\">Route Visualization</h3>\r\n                    <div className=\"text-sm text-gray-600\">\r\n                      {routeData.length} position points\r\n                    </div>\r\n                  </div>\r\n\r\n                  {routeData.length > 0 ? (\r\n                    <div className=\"h-96 w-full\">\r\n                      <DeviceMap\r\n                        devices={[{\r\n                          id: device.id,\r\n                          name: device.name,\r\n                          uniqueId: device.uniqueId,\r\n                          latitude: routeData[0]?.latitude || null,\r\n                          longitude: routeData[0]?.longitude || null,\r\n                          speed: null,\r\n                          course: null,\r\n                          lastUpdate: null,\r\n                          isOnline: false\r\n                        }]}\r\n                        routeData={routeData}\r\n                        showRoute={true}\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex items-center justify-center h-96 bg-gray-50 rounded-lg\">\r\n                      <div className=\"text-center\">\r\n                        <MapPin className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                        <p className=\"text-gray-500\">No route data available</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Positions Tab */}\r\n              {activeTab === 'positions' && (\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-lg font-medium text-gray-900\">Position History</h3>\r\n                    <button\r\n                      onClick={() => exportData('positions')}\r\n                      className=\"btn-secondary flex items-center space-x-2\"\r\n                    >\r\n                      <Download className=\"w-4 h-4\" />\r\n                      <span>Export</span>\r\n                    </button>\r\n                  </div>\r\n\r\n                  {reportData.positions.length > 0 ? (\r\n                    <div className=\"overflow-x-auto\">\r\n                      <table className=\"w-full text-sm\">\r\n                        <thead className=\"bg-gray-50\">\r\n                          <tr>\r\n                            <th className=\"px-4 py-2 text-left font-medium text-gray-700\">Time</th>\r\n                            <th className=\"px-4 py-2 text-left font-medium text-gray-700\">Latitude</th>\r\n                            <th className=\"px-4 py-2 text-left font-medium text-gray-700\">Longitude</th>\r\n                            <th className=\"px-4 py-2 text-left font-medium text-gray-700\">Speed</th>\r\n                            <th className=\"px-4 py-2 text-left font-medium text-gray-700\">Course</th>\r\n                            <th className=\"px-4 py-2 text-left font-medium text-gray-700\">Altitude</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-200\">\r\n                          {reportData.positions.slice(0, 100).map((position, index) => (\r\n                            <tr key={index} className=\"hover:bg-gray-50\">\r\n                              <td className=\"px-4 py-2\">\r\n                                {format(new Date(position.fixTime), 'MMM dd, HH:mm:ss')}\r\n                              </td>\r\n                              <td className=\"px-4 py-2 font-mono\">\r\n                                {position.latitude.toFixed(6)}\r\n                              </td>\r\n                              <td className=\"px-4 py-2 font-mono\">\r\n                                {position.longitude.toFixed(6)}\r\n                              </td>\r\n                              <td className=\"px-4 py-2\">\r\n                                {Math.round(position.speed)} km/h\r\n                              </td>\r\n                              <td className=\"px-4 py-2\">\r\n                                {Math.round(position.course)}Â°\r\n                              </td>\r\n                              <td className=\"px-4 py-2\">\r\n                                {Math.round(position.altitude)}m\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                      {reportData.positions.length > 100 && (\r\n                        <div className=\"text-center py-4 text-gray-500\">\r\n                          Showing first 100 positions. Export for complete data.\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-12\">\r\n                      <p className=\"text-gray-500\">No position data available</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState, useEffect } from 'react';\r\nimport { BarChart3, MapPin, Calendar, Download, Smartphone, Users } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport DeviceReportsModal from '../../components/AdminDeviceReports';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n//import { Navigate } from 'react-router-dom';\r\n\r\ninterface Device {\r\n  id: string;\r\n  name: string;\r\n  uniqueId: string;\r\n  traccarId: number;\r\n  lastUpdate: number | null;\r\n  latitude: number | null;\r\n  longitude: number | null;\r\n  speed: number | null;\r\n  course: number | null;\r\n  isActive: boolean;\r\n  isOnline?: boolean;\r\n  userId: string | null;\r\n  userEmail?: string;\r\n}\r\n\r\ninterface User {\r\n  id: string;\r\n  email: string;\r\n  name?: string;\r\n}\r\n\r\nexport default function AdminReports() {\r\n   useAuth();\r\n  const [devices, setDevices] = useState<Device[]>([]);\r\n  const [filteredDevices, setFilteredDevices] = useState<Device[]>([]);\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedDevice, setSelectedDevice] = useState<Device | null>(null);\r\n  const [selectedUserId, setSelectedUserId] = useState<string>('all');\r\n  const [filter, setFilter] = useState<string>('ALL');\r\n  const [searchQuery, setSearchQuery] = useState<string>('');\r\n\r\n  // Redirect non-admins\r\n  //if (!user || user.role !== 'admin') {\r\n  //  return <Navigate to=\"/dashbaord/reports\" />;\r\n  //}\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    fetchDevices();\r\n  }, [selectedUserId, filter]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await axios.get('/admin/users');\r\n      setUsers([{ id: 'all', email: 'All Users', name: 'All Users' }, ...response.data.users]);\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error);\r\n      toast.error('Failed to load users');\r\n    }\r\n  };\r\n\r\n  const fetchDevices = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get('/admin/devices', {\r\n        params: {\r\n          status: filter !== 'ALL' ? filter : undefined,\r\n          userId: selectedUserId !== 'all' ? selectedUserId : undefined,\r\n        },\r\n      });\r\n      console.log('Fetched devices:', response.data.devices);\r\n      setDevices(response.data.devices || []);\r\n    } catch (error) {\r\n      console.error('Error fetching devices:', error);\r\n      toast.error('Failed to load devices');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter devices based on search query\r\n  useEffect(() => {\r\n    const lowerQuery = searchQuery.toLowerCase();\r\n    const filtered = devices.filter(\r\n      (device) =>\r\n        device.name.toLowerCase().includes(lowerQuery) ||\r\n        device.uniqueId.toLowerCase().includes(lowerQuery) ||\r\n        (device.userEmail && device.userEmail.toLowerCase().includes(lowerQuery))\r\n    );\r\n    setFilteredDevices(filtered);\r\n  }, [searchQuery, devices]);\r\n\r\n  const reportTypes = [\r\n    {\r\n      id: 'summary',\r\n      title: 'Summary Reports',\r\n      description: 'Distance, speed, and time analytics',\r\n      icon: BarChart3,\r\n      color: 'bg-primary-100 text-primary-600',\r\n    },\r\n    {\r\n      id: 'route',\r\n      title: 'Route Reports',\r\n      description: 'Visual route tracking on map',\r\n      icon: MapPin,\r\n      color: 'bg-success-100 text-success-600',\r\n    },\r\n    {\r\n      id: 'positions',\r\n      title: 'Position History',\r\n      description: 'Detailed GPS coordinate data',\r\n      icon: Calendar,\r\n      color: 'bg-warning-100 text-warning-600',\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"loading-spinner w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Admin Device Reports</h1>\r\n        <p className=\"text-gray-600\">Generate comprehensive reports for all GPS devices across users</p>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Filters</h2>\r\n        <div className=\"flex flex-wrap items-center gap-4\">\r\n          {/* User Filter */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Users className=\"w-5 h-5 text-gray-600\" />\r\n            <select\r\n              value={selectedUserId}\r\n              onChange={(e) => setSelectedUserId(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary-500 focus:border-primary-500\"\r\n            >\r\n              {users.map((user) => (\r\n                <option key={user.id} value={user.id}>\r\n                  {user.name || user.email}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Status Filter */}\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Smartphone className=\"w-5 h-5 text-gray-600\" />\r\n            <select\r\n              value={filter}\r\n              onChange={(e) => setFilter(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary-500 focus:border-primary-500\"\r\n            >\r\n              <option value=\"ALL\">All Statuses</option>\r\n              <option value=\"ONLINE\">Online</option>\r\n              <option value=\"OFFLINE\">Offline</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Search Bar */}\r\n          <div className=\"flex items-center space-x-4 flex-1\">\r\n            <input\r\n              type=\"text\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              placeholder=\"Search by device name, ID, or user email\"\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm w-full focus:ring-primary-500 focus:border-primary-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Report Types */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        {reportTypes.map((type) => {\r\n          const Icon = type.icon;\r\n          return (\r\n            <div key={type.id} className=\"card\">\r\n              <div className=\"flex items-center space-x-3 mb-4\">\r\n                <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${type.color}`}>\r\n                  <Icon className=\"w-5 h-5\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-semibold text-gray-900\">{type.title}</h3>\r\n                  <p className=\"text-sm text-gray-600\">{type.description}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Device Selection */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Select Device for Reports</h2>\r\n        \r\n        {filteredDevices.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <Smartphone className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No devices available</h3>\r\n            <p className=\"text-gray-600\">No devices found for the selected filters</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {filteredDevices.map((device) => (\r\n              <div\r\n                key={device.id}\r\n                className=\"border border-gray-200 rounded-lg p-4 hover:border-primary-300 hover:shadow-md transition-all cursor-pointer\"\r\n                onClick={() => {\r\n                  console.log(`Opening reports for device ID: ${device.id}`);\r\n                  setSelectedDevice({\r\n                   id: device.id,\r\n    name: device.name,\r\n    uniqueId: device.uniqueId,\r\n    userEmail: device.userEmail ,\r\n    traccarId: device.traccarId,\r\n    lastUpdate: device.lastUpdate,\r\n    latitude: device.latitude,\r\n    longitude: device.longitude,\r\n    speed: device.speed,\r\n    course: device.course,\r\n    isActive: device.isActive,\r\n    userId: device.userId || null, \r\n                  });\r\n                }}\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div\r\n                    className={`w-10 h-10 rounded-lg flex items-center justify-center ${\r\n                      device.isOnline ? 'bg-success-100' : 'bg-gray-100'\r\n                    }`}\r\n                  >\r\n                    <Smartphone\r\n                      className={`w-5 h-5 ${device.isOnline ? 'text-success-600' : 'text-gray-400'}`}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"font-medium text-gray-900\">{device.name}</h3>\r\n                    <p className=\"text-sm text-gray-600\">{device.uniqueId}</p>\r\n                    <p className=\"text-sm text-gray-500\">User: {device.userEmail || 'Unassigned'}</p>\r\n                    <div className=\"flex items-center space-x-2 mt-1\">\r\n                      <span\r\n                        className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                          device.isOnline ? 'bg-success-100 text-success-800' : 'bg-gray-100 text-gray-800'\r\n                        }`}\r\n                      >\r\n                        {device.isOnline ? 'Online' : 'Offline'}\r\n                      </span>\r\n                      {device.lastUpdate && (\r\n                        <span className=\"text-xs text-gray-500\">\r\n                          {new Date(device.lastUpdate).toLocaleDateString()}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-4\">\r\n                  <button className=\"btn-primary w-full text-sm\">\r\n                    <BarChart3 className=\"w-4 h-4 mr-2\" />\r\n                    Generate Reports\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <button\r\n            onClick={() => {\r\n              const blob = new Blob([JSON.stringify(filteredDevices, null, 2)], {\r\n                type: 'application/json',\r\n              });\r\n              const url = URL.createObjectURL(blob);\r\n              const a = document.createElement('a');\r\n              a.href = url;\r\n              a.download = `all_devices_${selectedUserId === 'all' ? 'all_users' : selectedUserId}_${\r\n                filter === 'ALL' ? 'all_statuses' : filter\r\n              }_${new Date().toISOString().split('T')[0]}.json`;\r\n              a.click();\r\n              URL.revokeObjectURL(url);\r\n              toast.success('All device data exported');\r\n            }}\r\n            className=\"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors\"\r\n          >\r\n            <Download className=\"w-5 h-5 text-primary-600\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-gray-900\">Export All Device Data</div>\r\n              <div className=\"text-sm text-gray-600\">Download data for filtered devices</div>\r\n            </div>\r\n          </button>\r\n          <button className=\"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors\">\r\n            <Calendar className=\"w-5 h-5 text-primary-600\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-gray-900\">Schedule Reports</div>\r\n              <div className=\"text-sm text-gray-600\">Set up automated reporting</div>\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Device Reports Modal */}\r\n      {selectedDevice && (\r\n        <DeviceReportsModal\r\n          device={selectedDevice}\r\n          onClose={() => setSelectedDevice(null)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":["DeviceReportsModal","device","onClose","activeTab","setActiveTab","useState","dateRange","setDateRange","customFrom","setCustomFrom","customTo","setCustomTo","loading","setLoading","reportData","setReportData","useEffect","fetchReports","getDateRange","now","today","sevenDaysAgo","thirtyDaysAgo","from","to","reportsResponse","positionsResponse","axios","error","toast","exportData","type","data","filename","format","blob","url","a","formatDuration","minutes","hours","mins","routeData","pos","jsxs","jsx","X","Calendar","option","e","BarChart3","Route","MapPin","tab","Icon","LoadingSpinner","Fragment","Download","Gauge","Clock","DeviceMap","_a","_b","position","index","AdminReports","useAuth","devices","setDevices","filteredDevices","setFilteredDevices","users","setUsers","selectedDevice","setSelectedDevice","selectedUserId","setSelectedUserId","filter","setFilter","searchQuery","setSearchQuery","fetchUsers","fetchDevices","response","lowerQuery","filtered","reportTypes","Users","user","Smartphone"],"mappings":"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"}